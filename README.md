# Schedule Player


## 소개
**Schedule Player**는 수업, 시험, 알림 등 정해진 시간에 맞춰 음악 또는 알림음을 자동으로 재생해주는 Windows용 스케줄러 프로그램입니다. PySide6 기반의 GUI를 제공하며, 다양한 오디오 파일을 지정된 시간에 자동으로 재생할 수 있습니다.

---
<img width="1313" height="679" alt="image" src="https://github.com/user-attachments/assets/0aad974b-c232-4d54-926e-5bc481f1c569" />




## 주요 기능
- 여러 개의 스케줄(일정) 등록 및 관리
- 각 스케줄별로 알림 시간, 미리 알림 시간, 자동 재생 여부 설정
- 내장 플레이어, 윈도우 기본 플레이어, 사용자 지정 플레이어로 오디오 재생 가능
- mp3, wav 등 다양한 오디오 파일 지원
- 스케줄 파일(.sch)로 저장 및 불러오기
- 트레이 아이콘, 색상 알림, 볼륨 조절 등 다양한 부가 기능
- 매일 자동으로 재생 상태 초기화
- 직관적인 GUI와 상태 표시줄 제공

---

## 폴더 구조

```
Schedule_Player/
  ├── main.py                # 메인 프로그램 (GUI 및 전체 로직)
  ├── musicplayer.py         # 내장 음악 플레이어 위젯
  ├── ui_*.py, ui_*.ui       # PySide6 Designer로 만든 UI 파일들
  ├── plugins/               # 오디오/비디오 관련 DLL 플러그인
  ├── backup_ui/             # 백업된 UI 코드
  ├── dist/                  # 빌드된 실행 파일 및 리소스
  ├── build/                 # PyInstaller 빌드 파일
  ├── *.dat, *.sch, *.wav, *.mp3, *.ico, *.png  # 데이터 및 리소스 파일
  └── README.md              # 프로젝트 설명 파일 (본 문서)
```

---

## 주요 코드 및 구조 설명

### 1. main.py (메인 윈도우)
- 프로그램의 진입점이며, 전체 GUI와 스케줄 관리, 오디오 재생, 파일 저장/불러오기, 설정 관리 등 모든 핵심 기능을 담당합니다.
- 주요 클래스: `MyApp(QMainWindow, Ui_MainWindow)`
  - 스케줄 데이터(`schedule_data_list`), 각 라인 위젯(`schedule_widget_list`), 자동재생 상태(`playerActive_list`), 내장 플레이어(`musicPlayer`) 등 관리
  - 스케줄 추가/삭제/초기화, UI 갱신, 이벤트 처리, 파일 저장/불러오기, 음악 리스트 관리, 자동 재생 등 다양한 메서드 포함

### 2. musicplayer.py (내장 음악 플레이어)
- mp3, wav 파일을 재생할 수 있는 위젯을 제공합니다.
- 메인 윈도우에서 내장 플레이어로 음악을 재생할 때 사용됩니다.

### 3. ui_*.py, ui_*.ui (UI 파일)
- PySide6 Designer로 만든 UI 레이아웃 파일과 변환된 파이썬 코드입니다.
- 메인화면, 스케줄 라인, 정보창 등 다양한 화면을 정의합니다.

### 4. ScheduleLine (스케줄 라인 위젯)
- 한 개의 스케줄(일정) 입력/설정 UI를 담당하는 위젯입니다.
- 시간, 알림음, 플레이어, 자동재생 등 개별 설정이 가능합니다.

### 5. AboutWindow (정보창)
- 프로그램 정보, 버전, 제작자, 홈페이지 등을 표시하는 창입니다.

---

## 데이터 구조
- **SCHEDULE_DEFAULT**: 각 스케줄 라인의 초기값(튜플)
- **schedule_data_list**: 각 스케줄 라인의 상태를 저장하는 2차원 리스트
- **playerActive_list**: 자동 재생 활성화 여부(리스트)

---

## 동작 흐름 요약
1. 프로그램 실행 시 메인 윈도우(`MyApp`)가 생성되고, UI 초기화 및 데이터 로드가 이루어집니다.
2. 스케줄 라인은 동적으로 추가/삭제할 수 있으며, 각 라인은 별도의 위젯(`ScheduleLine`)으로 관리됩니다.
3. 각 스케줄별로 시간, 알림음, 플레이어, 자동재생 등을 개별 설정할 수 있습니다.
4. 타이머를 통해 1초마다 남은 시간을 체크하고, 알림 시간이 되면 자동으로 음악이 재생됩니다.
5. 스케줄 정보는 `.sch` 파일로 저장/불러오기 할 수 있으며, 창 크기 등 설정은 별도의 `.dat` 파일로 관리됩니다.
6. 음악 재생은 내장 플레이어, 윈도우 기본 플레이어, 사용자 지정 플레이어 중 선택할 수 있습니다.

---

## 설치 및 실행 방법

1. **Python 설치**
   - Python 3.7 이상이 필요합니다.
   - [Python 공식 사이트](https://www.python.org/downloads/)에서 설치하세요.

2. **필수 패키지 설치**
   ```bash
   # 방법 1: requirements.txt 사용 (권장)
   pip install -r requirements.txt
   
   # 방법 2: 개별 설치
   pip install PySide6>=6.4.0
   ```

3. **실행**
   ```bash
   python main.py
   ```
   또는 `dist/` 폴더의 `schedule_player.exe` 실행 파일을 사용할 수 있습니다.

---

## 사용법

1. '새로 만들기' 버튼으로 스케줄 라인을 추가합니다.
2. 각 라인에서 시간, 알림음 파일, 플레이어 종류를 선택합니다.
3. [A] 버튼을 눌러 자동 재생을 활성화하면, 지정된 시간에 알림음이 자동으로 재생됩니다.
4. '저장' 버튼으로 현재 스케줄을 `.sch` 파일로 저장할 수 있습니다.
5. '불러오기' 버튼으로 저장된 스케줄을 다시 불러올 수 있습니다.

---

## 의존성
- Python 3.7 이상
- PySide6

---

## 현재 구조의 한계점 및 문제점

### 쓰레드 미적용으로 인한 문제점
현재 프로그램은 **단일 쓰레드(Single Thread)** 구조로 설계되어 있어 다음과 같은 문제점이 있습니다:

#### 1. **GUI 블로킹 문제**
- 음악 재생 시 GUI가 멈추거나 반응이 느려질 수 있습니다
- 여러 스케줄이 동시에 재생될 때 프로그램이 일시적으로 멈출 수 있습니다
- 사용자 인터페이스 조작(버튼 클릭, 메뉴 선택 등)이 지연될 수 있습니다

#### 2. **성능 저하**
- 모든 처리가 메인 쓰레드에서 이루어져 CPU 사용률이 높아집니다
- 스케줄이 많을수록 시간 체크 및 UI 갱신이 느려집니다
- 메모리 사용량이 비효율적으로 증가할 수 있습니다

#### 3. **안정성 문제**
- 음악 파일 로딩 중 오류가 발생하면 전체 프로그램이 멈출 수 있습니다
- 외부 플레이어 실행 시 예상치 못한 동작이 발생할 수 있습니다
- 프로그램 종료 시 음악 재생이 완전히 종료되지 않을 수 있습니다

#### 4. **확장성 제한**
- 동시에 여러 음악을 재생하기 어렵습니다
- 실시간 음악 제어(볼륨 조절, 재생 위치 변경 등)가 제한적입니다
- 백그라운드 작업(파일 스캔, 메타데이터 추출 등)이 어렵습니다

### 현재 사용 중인 기술
- **QTimer**: 1초마다 시간 체크 및 UI 갱신 (메인 쓰레드)
- **QMediaPlayer**: 내장 음악 재생 (메인 쓰레드)
- **subprocess.Popen()**: 외부 플레이어 실행 (별도 프로세스)

---

## 개발 및 확장 포인트

### 우선순위 높음 (성능 개선)
- **쓰레드 적용**: QThread를 사용한 음악 재생 분리
- **쓰레드 풀 구현**: 여러 스케줄 동시 재생 지원
- **비동기 처리**: asyncio 또는 QEventLoop 활용

### 기능 확장
- 스케줄 라인 개수 제한/확장
- 음악 파일 포맷 추가 지원
- 트레이 아이콘, 알림 팝업 등 부가 기능 강화
- 스케줄 반복(요일별, 주기별) 기능 추가
- 설정 UI 분리 및 고급 옵션 추가
- 다국어 지원(한글/영어 등)

### 코드 품질 개선
- 코드 리팩토링 및 모듈화
- 예외 처리 강화
- 로깅 시스템 추가
- 단위 테스트 작성

---

## 라이선스
이 프로젝트는 [MIT 라이선스](LICENSE)를 따릅니다.

---

## 개발자 및 문의
- 정원길
- [홈페이지](https://techclass.tistory.com/)
- 문의 및 버그 제보: [이슈](https://github.com/bougs93/Schedule_Player/issues)
